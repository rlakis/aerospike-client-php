<?php

const CN_LEBANON                    = 1;
const CN_EMIRATES                   = 2;
const CN_BAHRAIN                    = 3;
const CN_SAUDI_ARABIA               = 4;
const CN_EGYPT                      = 5;
const SN_SYRIA                      = 6;
const CN_KUWAIT                     = 7;
const CN_JORDAN                     = 8;
const CN_QATAR                      = 9;
const CN_SUDAN                      = 10;
const CN_TUNISIA                    = 11;
const CN_YEMEN                      = 12;
const CN_ALGERIA                    = 15;
const CN_IRAQ                       = 106;
const CN_LIBYA                      = 122;
const CN_MOROCCO                    = 145;
const CN_OMAN                       = 161;

const CT_LB_BEIRUT                  = 1;
const CT_AE_ABU_DHABI               = 4;
const CT_AE_DUBAI                   = 14;
const CT_AE_AIN                     = 6;
const CT_AE_SHARJAH                 = 333;
const CT_AE_AJMAN                   = 436;
const CT_AE_FUJAIRAH                = 812;
const CT_AE_RAS_AL_KHAIMAH          = 815;
const CT_AE_UMM_AL_QUWAIN           = 2609;
const CT_BH_MANAMA                  = 5;
const CT_SA_RIYADH                  = 7;
const CT_SA_JEDDAH                  = 8;
const CT_SA_DAMMAM                  = 9;
const CT_SA_ASEER                   = 12;
const CT_SA_MEDINA                  = 26;
const CT_SA_TABUK                   = 27;
const CT_SA_QASSIM                  = 28;
const CT_SA_AHSA                    = 29;
const CT_SA_HAIL                    = 1255;
const CT_EG_CAIRO                   = 10;
const CT_EG_ALEXANDRIA              = 11;
const CT_EG_UPPER                   = 22;
const CT_EG_DELTA                   = 23;
const CT_SY_DAMASCUS                = 13;
const CT_SY_ALEPPO                  = 21;
const CT_KW_KUWAIT                  = 15;
const CT_KW_TENTH_REGION            = 24;
const CT_KW_JAHRA                   = 25;
const CT_JO_AMMAN                   = 16;
const CT_JO_AQABA                   = 17;
const CT_JO_IRBID                   = 18;
const CT_JO_ZARQAA                  = 19;
const CT_QA_DOHA                    = 20;
const CT_IQ_BASRA                   = 180;
const CT_IQ_BAGHDAD                 = 1239;
const CT_OM_MUSCAT                  = 761;
const CT_MA_CASABLANCA              = 1026;
const CT_SD_KHARTOUM                = 1200;
const CT_YE_SANAA                   = 1224;
const CT_TN_TUNIS                   = 1210;
const CT_DZ_ALGIERS                 = 1226;
const CT_LY_TRIPOLI                 = 1230;

const R_PROPERTIES                  = 1;
const R_AUTOMOTIVES                 = 2;
const R_JOBS                        = 3;
const R_CLASSIFIEDS                 = 99;
const R_SERVICES                    = 4;

const P_FOR_SALE                    = 1;
const P_RENTAL                      = 2;
const P_VACANCIES                   = 3;
const P_SEEKING_WORK                = 4;
const P_ASK_RENT                    = 6;
const P_VARIOUS                     = 999;
const P_OFFERED_SERVICES            = 5;
const P_ASK_BUY                     = 7;
const P_TRADE_IN                    = 8;

const SR_APARTMENTS                  = 1;
const SR_BUILDINGS                   = 8;
const SR_CAMPS                       = 1000;
const SR_CHALETS                     = 4;
const SR_COMMERCIAL_BUILDING         = 346;
const SR_FACTORIES                   = 367;
const SR_FARMS                       = 9;
const SR_FURNISHED_APARTMENTS        = 2;
const SR_HALLS                       = 1458;
const SR_HOTELS_RESORTS              = 419;
const SR_HOUSES                      = 121;
const SR_INTERNATIONAL_REALESTATE    = 748;
const SR_LABOR_ACCOMMODATION         = 162;
const SR_LANDS                       = 7;
const SR_MISCELLANEOUS               = 105;
const SR_OFFICES                     = 6;
const SR_RESTAURANTS_COFFEE_SHOPS    = 498;
const SR_SHARING                     = 106;
const SR_SHOPS                       = 5;
const SR_STUDIOS                     = 122;
const SR_TRADITIONAL_HOUSE           = 294;
const SR_UNDER_CONSTRUCTION          = 1341;
const SR_VILLAS                      = 131;
const SR_VILLAS_AND_HOUSES           = 3;
const SR_WAREHOUSES                  = 111;

const SC_ALFA_ROMEO                  = 76;
const SC_ASIA                        = 100;
const SC_ASTON_MARTIN                = 387;
const SC_AUDI                        = 11;
const SC_AUSTIN                      = 97;
const SC_BENTLEY                     = 98;
const SC_BMW                         = 10;
const SC_BUGATTI                     = 118;
const SC_BUICK                       = 93;
const SC_CADILLAC                    = 21;
const SC_CHERY                       = 120;
const SC_CHEVROLET                   = 22;
const SC_CHRYSLER                    = 55;
const SC_CITROEN                     = 56;
const SC_CLASSIC_CARS                = 75;
const SC_DACIA                       = 104;
const SC_DAEWOO                      = 23;
const SC_DAIHATSU                    = 71;
const SC_DATSUN                      = 1515;
const SC_DFSK                        = 1520;
const SC_DODGE                       = 59;
const SC_FERRARI                     = 94;
const SC_FIAT                        = 24;
const SC_FORD                        = 26;
const SC_GMC                         = 34;
const SC_HONDA                       = 28;
const SC_HUMMER                      = 32;
const SC_HYUNDAY                     = 35;
const SC_IMPORT_CARS                 = 1518;
const SC_INFINITY                    = 73;
const SC_ISUZU                       = 87;
const SC_JAC                         = 1517;
const SC_JAGUAR                      = 37;
const SC_JEEP                        = 38;
const SC_KIA                         = 58;
const SC_LADA                        = 89;
const SC_LAMBORGHINI                 = 101;
const SC_LANCIA                      = 99;
const SC_LAND_ROVER                  = 39;
const SC_LEXUS                       = 30;
const SC_LINCOLN                     = 57;
const SC_LOTUS                       = 386;
const SC_MASERATTI                   = 102;
const SC_MAZDA                       = 40;
const SC_MCLAREN                     = 384;
const SC_MERCEDES                    = 15;
const SC_MERCURY                     = 60;
const SC_MG                          = 103;
const SC_MINI_COOPER                 = 79;
const SC_MITSUBISHI                  = 33;
const SC_MORGAN                      = 119;
const SC_NISSAN                      = 27;
const SC_OLDS_MOBILE                 = 44;
const SC_OPEL                        = 48;
const SC_OTHER_AUTOS                 = 117;
const SC_PEUGEOT                     = 49;
const SC_PLYMOUTH                    = 385;
const SC_PONTIAC                     = 67;
const SC_PORSCHE                     = 74;
const SC_PROTON                      = 90;
const SC_RENAULT                     = 50;
const SC_ROLLS_ROYCE                 = 95;
const SC_ROVER                       = 96;
const SC_SAAB                        = 77;
const SC_SABA                        = 1519;
const SC_SAMSUNG                     = 82;
const SC_SANGYOUNG                   = 78;
const SC_SEAT                        = 51;
const SC_SIMCA                       = 88;
const SC_SKODA                       = 92;
const SC_SMART                       = 80;
const SC_SUBARU                      = 81;
const SC_SUZUKI                      = 52;
const SC_TATA                        = 91;
const SC_TOYOTA                      = 13;
const SC_VOLKS_WAGEN                 = 54;
const SC_VOLVO                       = 53;

const SJ_AC_TECHNICIANS              = 339;
const SJ_ACCOUNTING                  = 14;
const SJ_ADMINISTRATION              = 213;
const SJ_AUDIO_VISUAL                = 334;
const SJ_BEAUTY_CARE                 = 43;
const SJ_CHILD_CARE                  = 329;
const SJ_CLEANING_WORKERS            = 328;
const SJ_CONSTRUCTION                = 389;
const SJ_CRAFTSMEN                   = 1058;
const SJ_CUSTOMER_SERVICE            = 134;
const SJ_DATA_ENTRY                  = 744;
const SJ_DELIVERY                    = 332;
const SJ_DESIGNER                    = 18;
const SJ_DIFFER_JOBS                 = 29;
const SJ_DRIVERS                     = 45;
const SJ_EDITORIAL                   = 170;
const SJ_EMPLOYEE                    = 463;
const SJ_ENGINEERING                 = 36;
const SJ_FASHION                     = 152;
const SJ_FINE_ARTS                   = 42;
const SJ_FITNESS                     = 146;
const SJ_GUARDS                      = 326;
const SJ_HOUSEMAIDS                  = 327;
const SJ_HUMAN_RESOURCES             = 112;
const SJ_INFORMATION_TECHNOLOGY      = 129;
const SJ_LABORS                      = 46;
const SJ_LANDSCAPING                 = 150;
const SJ_LAW                         = 110;
const SJ_MEDICINE_AND_NURSING        = 109;
const SJ_PARTNERSHIP                 = 115;
const SJ_PROGRAMMING                 = 41;
const SJ_PUBLIC_RELATIONS            = 278;
const SJ_SALES_AND_MARKETING         = 16;
const SJ_SECRETERIAL                 = 12;
const SJ_TAILORS                     = 345;
const SJ_TEACHING                    = 20;
const SJ_TECHNICIANS                 = 47;
const SJ_TICKETING                   = 292;
const SJ_TOURIST_AND_RESTAURANTS     = 17;
const SJ_TRANSLATORS                 = 137;
const SJ_WEB_DESIGNERS               = 126;

const SS_HEALTH_BEAUTY               = 192;
const SS_AGRICULTURAL_SERVICES       = 721;
const SS_BUILDING_HOME_SERVICES      = 189;
const SS_BUSINESS_INVESTMENT         = 215;
const SS_CAR_RENTAL                  = 431;
const SS_CAR_SERVICE                 = 586;
const SS_CLEANING_SERVICES           = 1179;
const SS_COMPUTER_SERVICES           = 197;
const SS_CONTRACTING                 = 324;
const SS_DREAM_INTERPRETATION        = 730;
const SS_ENTERTAINMENT               = 191;
const SS_EVENTS_PLANNING             = 438;
const SS_FORMALITIES_SERVICES        = 253;
const SS_GENERAL_SERVICES            = 1487;
const SS_HOMEMADE_COOKING            = 1030;
const SS_HUMAN_RESOURCES_SERVICES    = 185;
const SS_HUMANITARIAN_AID            = 934;
const SS_INTERNET                    = 1437;
const SS_LABOR_RECRUITMENT           = 1201;
const SS_LAW_SERVICES                = 391;
const SS_LOAN_SERVICES               = 1514;
const SS_LOST_FOUND                  = 754;
const SS_MAINTENANCE_SERVICES        = 1114;
const SS_MARKETING_SERVICE           = 283;
const SS_MARRIAGE                    = 1521;
const SS_PEST_CONTROL                = 540;
const SS_PRIVATE_LESSONS             = 19;
const SS_PROFESSIONAL_SERVICES       = 229;
const SS_PROPERTIES_SERVICES         = 321;
const SS_PROPERTY_SERVICES           = 194;
const SS_REMOVAL_SERVICES            = 190;
const SS_SECURITY_SERVICES           = 371;
const SS_SHIPPING_SERVICES           = 193;
const SS_TAX_MONEY_SERVICES          = 195;
const SS_TAXI                        = 260;
const SS_TELECOM_SERVICES            = 196;
const SS_TRANSLATION                 = 224;
const SS_TRAVEL_SERVICES             = 198;
const SS_TUITION_SERVICES            = 199;

const SI_ACCESSORIES                 = 1079;
const SI_AGRICULTURE_EQUIPMENT       = 864;
const SI_ANIMALS_AND_PETS            = 116;
const SI_ANTIQUES_COLLECTIBLES       = 214;
const SI_BILLBOARDS                  = 155;
const SI_BOOKS_MAGAZINES             = 1112;
const SI_BUILDING_MATERIALS          = 363;
const SI_BUS                         = 65;
const SI_CAMERAS                     = 293;
const SI_CAR_NUMBERS                 = 291;
const SI_CLOTHES                     = 85;
const SI_COMPUTERS                   = 144;
const SI_COSMETICS                   = 539;
const SI_ELECTRICITY_GENERATOR       = 296;
const SI_ELECTRONICS                 = 617;
const SI_EQUIPMENTS                  = 297;
const SI_EVENTS                      = 834;
const SI_FISHING                     = 1314;
const SI_FOOD_NUTRITION              = 515;
const SI_FRAGRANCES                  = 513;
const SI_FURNITURE                   = 84;
const SI_GAMES                       = 279;
const SI_HAJJ_AND_OMRA               = 130;
const SI_HEALTH_CARE                 = 132;
const SI_HEAVY_DUTY_VEHICLE          = 69;
const SI_HOME_APPLIANCES             = 125;
const SI_HUNTING                     = 350;
const SI_INDUSTRIAL_EQUIPMENT        = 223;
const SI_ITEMS                       = 114;
const SI_LICENSES                    = 124;
const SI_MEDICAL_EQUIPMENT           = 392;
const SI_MOTORCYLES                  = 107;
const SI_MOTORHOME                   = 1061;
const SI_MUSICAL_INSTRUMENTS         = 135;
const SI_NAUTICAL_EQUIPMENT          = 108;
const SI_NUMBERS                     = 113;
const SI_PICK_UPS                    = 62;
const SI_PUBLIC_PLATE                = 325;
const SI_SECURITY_SYSTEMS            = 534;
const SI_SMARTPHONE                  = 123;
const SI_SOFTWARE_SOLUTIONS          = 766;
const SI_SPARE_PARTS                 = 236;
const SI_SPORTS_EQUIPMENT            = 343;
const SI_UNCLASSIFIED                = 63;
const SI_WATCHES                     = 298;
const SI_WHOLESALE_DEALS             = 924;

const RK                            = 'roots';
const SK                            = 'sections';
const LOCL                          = 'l';
const INTL                          = 'i';
const PRPS                          = 'p';
const CN                            = 'cn';
const CT                            = 'cc';

class MCPostPreferences {
    private $version = 1;
    private $preferences = [];
    
    private function setup() {
        $this->preferences[RK] = [];
        $this->preferences[SK] = [];
        
        $real_estate_filter = MCFilter::newInstance()->setIncluded()->addPurposes([P_FOR_SALE, P_RENTAL, P_ASK_RENT, P_ASK_BUY, P_TRADE_IN]);
        
        $villa_filter = MCFilter::newInstance()->setBlocked()->setMovedTo(SR_VILLAS_AND_HOUSES);
        
        $this->preferences[SK][SR_INTERNATIONAL_REALESTATE] = [PRPS=>[P_FOR_SALE]];
        $jobs_filter = MCFilter::newInstance()->setIncluded()->addPurposes([P_VACANCIES, P_SEEKING_WORK, P_OFFERED_SERVICES]);
        
        
        
        
        $this->preferences[1] = [[],[]];
    }
    
    private function initArray() {
        return [PRPS=>[], LOCL=>[], INTL=>[]];
    }
}


class MCFilter {
    private $excluded;
    private $country;
    private $city;
    private $purposes;
    private $moveTo;
    private $blocked;
    
    private function __construct() {
        $this->moveTo = 0;
        $this->blocked = 0;
        $this->purposes = [];
    }
    
    public static function newInstance() : MCFilter {
        $instance = new MCFilter();
        return $instance;
    }
    
    public function setExcluded() : MCFilter {
        $this->excluded = 1; 
        return $this;
    }
    
    public function setIncluded() : MCFilter {
        $this->excluded = 0;
        return $this;
    }
    
    public function addPurpose(int $purposeId) : MCFilter {
        if (!in_array($purposeId, $this->purposes)) {
            $this->purposes[] = $purposeId;
        }
        return $this;
    }
    
    public function addPurposes(array $purposes) : MCFilter {
        foreach ($purposes as $value) {
            $this->addPurpose($value);
        }
        return $this;
    }
    
    public function setBlocked() : MCFilter {
        $this->blocked=1;
        return $this;
    }
    
    public function setMovedTo(int $value) {
        $this->moveTo = $value;
        return $this;
    }
 }


class MCPreference {
    private $allowed;
    private $filters = [];
    
    public static function newInstance() : MCPreference {
        $instance = new MCPreference();
        return $instance;
    }
}